<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">Client Example | Casper</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://operators.casper.network//docs/dapp-dev-guide/tutorials/multi-sig/client"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Client Example | Casper"><meta data-react-helmet="true" name="description" content="This section covers an example client that invokes a smart contract for key management. In addition to the main account, the client code will add two additional associated accounts to perform deployments. These associated accounts will perform deployments but will not be able to add another account."><meta data-react-helmet="true" property="og:description" content="This section covers an example client that invokes a smart contract for key management. In addition to the main account, the client code will add two additional associated accounts to perform deployments. These associated accounts will perform deployments but will not be able to add another account."><link data-react-helmet="true" rel="icon" href="/docs/image/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://operators.casper.network//docs/dapp-dev-guide/tutorials/multi-sig/client"><link data-react-helmet="true" rel="alternate" href="https://operators.casper.network//docs/dapp-dev-guide/tutorials/multi-sig/client" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://operators.casper.network//docs/dapp-dev-guide/tutorials/multi-sig/client" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.5017e055.css">
<link rel="preload" href="/docs/assets/js/runtime~main.42631c81.js" as="script">
<link rel="preload" href="/docs/assets/js/main.b30bf4af.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/icon/logo-dark.svg" alt="Casper Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/docs/icon/logo-white.svg" alt="Casper Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title"></b></a><a class="navbar__item navbar__link" href="/docs/workflow">How To&#x27;s</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/dapp-dev-guide">Developers</a><a class="navbar__item navbar__link" href="/docs/operators">Operators</a><a class="navbar__item navbar__link" href="/docs/design">Design</a><a class="navbar__item navbar__link" href="/docs/economics">Economics</a><a class="navbar__item navbar__link" href="/docs/staking">Staking</a><a class="navbar__item navbar__link" href="/docs/glossary">Glossary</a><a class="navbar__item navbar__link" href="/docs/faq">FAQ</a><a href="https://discord.gg/casperblockchain" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_EbrZ"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/dapp-dev-guide/tutorials/multi-sig/client" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li></ul></div><a href="https://github.com/casper-network/docs-app" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒ™</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dapp-dev-guide">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dapp-dev-guide/why-build-on-casper">Why Build on Casper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dapp-dev-guide/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/writing-contracts">Writing Smart Contracts</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dapp-dev-guide/testing">Testing Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dapp-dev-guide/setup-nctl">Local Network Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dapp-dev-guide/upgrading-contracts">Upgrading Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dapp-dev-guide/deploying-contracts">Deploying Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dapp-dev-guide/calling-contracts">Calling Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dapp-dev-guide/execution-error-codes">Execution Error Codes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dapp-dev-guide/keys">Accounts and Cryptographic Keys</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dapp-dev-guide/understanding-hash-types">Understanding Hash Types</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/sdk">SDK Client Libraries</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/docs/tutorials">Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/counter">A Counter Contract Tutorial</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/erc20">ERC-20 Tutorial</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dapp-dev-guide/tutorials/kv-storage-tutorial">Key-Value Storage Tutorial</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/docs/multi-sig">Multi-Signature Tutorial</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/multi-sig">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dapp-dev-guide/tutorials/multi-sig/concepts">Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dapp-dev-guide/tutorials/multi-sig/contract">Contract Example</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/dapp-dev-guide/tutorials/multi-sig/client">Client Example</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dapp-dev-guide/tutorials/multi-sig/additional">Additional Scenarios</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dapp-dev-guide/tutorials/upgrade-tutorial">Smart Contract Upgrade Tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dapp-dev-guide/tutorials/casper-signer">Casper Signer in a dApp</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_eoK2"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_e+kA"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Client Example</h1></header><p>This section covers an example client that invokes a smart contract for key management. In addition to the main account, the client code will add two additional associated accounts to perform deployments. These associated accounts will perform deployments but will not be able to add another account.</p><p>You will test the client example using <a href="https://github.com/casper-network/casper-node/tree/master/utils/nctl" target="_blank" rel="noopener noreferrer">NCTL</a>, and interact with your local network.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h2><ul><li>You have compiled the <a href="https://github.com/casper-ecosystem/keys-manager" target="_blank" rel="noopener noreferrer">example contract</a> for key management</li><li>You have set up the <a href="https://github.com/casper-network/casper-node/tree/master/utils/nctl" target="_blank" rel="noopener noreferrer">NCTL</a> tool according to the <a href="/docs/dapp-dev-guide/setup-nctl">NCTL guide</a></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="setting-up-a-local-casper-network">Setting up a Local Casper Network<a class="hash-link" href="#setting-up-a-local-casper-network" title="Direct link to heading">â€‹</a></h2><p>Use the following commands to activate an NCTL environment and run a local network:</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">source</span><span class="token plain"> casper-node/utils/nctl/activate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nctl-assets-setup </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> nctl-start</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The network you created with the NCTL tool has a special account called a faucet account, which holds your tokens. You will need these tokens to interact with the network. If the network is up and running, you can see your faucet account details with the following command.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">nctl-view-faucet-account</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="setting-up-the-client">Setting up the Client<a class="hash-link" href="#setting-up-the-client" title="Direct link to heading">â€‹</a></h2><p>This client code expects a compiled WASM file in the <code>contract</code> folder and a local network called <code>casper-net-1</code>.</p><p>Now you need to specify the configuration needed for your client to communicate with the network:</p><ul><li>The <code>BASE_KEY_PATH</code> for the absolute path to your faucet account</li><li>The <code>NODE_URL</code> for the first node in your local network</li></ul><p>Navigate to your <code>keys-manager/client/</code> folder and create a <code>.env</code> file to specify the required configurations.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> keys-manager/client/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">touch</span><span class="token plain"> .env</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">open</span><span class="token plain"> -e .env</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Your <code>.env</code> file will look like this:</p><blockquote><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">BASE_KEY_PATH=&lt;ENTER_YOUR_PATH&gt;/casper-node/utils/nctl/assets/net-1/faucet/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NODE_URL=http://localhost:11101/rpc</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></blockquote><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Replace &lt;ENTER_YOUR_PATH&gt; with the absolute path of your local drive, because the relative path does not work in this context.</p></div></div><p>If you would like to customize your setup further, you can set other optional environment variables described in the table below.</p><table><thead><tr><th>Variable</th><th>Description</th><th>Default Value</th></tr></thead><tbody><tr><td>WASM_PATH</td><td>The path of the compiled WASM contract.</td><td><code>../contract/target/wasm32-unknown-unknown/release/keys-manager.wasm</code></td></tr><tr><td>NETWORK_NAME</td><td>The name of your local network set up by NCTL.</td><td><code>casper-net-1</code></td></tr><tr><td>FUND_AMOUNT</td><td>Number of motes that accounts will be funded.</td><td><code>10000000000000</code></td></tr><tr><td>PAYMENT_AMOUNT</td><td>Number of motes that will be used as payment for deploys.</td><td><code>100000000000</code></td></tr><tr><td>TRANSFER_AMOUNT</td><td>Number of motes that will be used for native test transfers.</td><td><code>2500000000</code></td></tr></tbody></table><p>Next, close the <code>.env</code> file and install the JavaScript packages in the <code>keys-manager/client</code> folder with the following command.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="testing-the-client">Testing the Client<a class="hash-link" href="#testing-the-client" title="Direct link to heading">â€‹</a></h2><p>Navigate to your <code>/keys-manager/client</code> folder and run the <em>keys-manager</em> using <em>npm</em>. Your WASM file&#x27;s path is relative to the <code>client</code> folder, so you need to run the file from here.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> run start:atomic</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Note</strong>: You may have to wait some time after entering the above command until you see a result.</p><p>You can match the output against the expected output described in the next section.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="exploring-the-client-output">Exploring the Client Output<a class="hash-link" href="#exploring-the-client-output" title="Direct link to heading">â€‹</a></h3><p>We will explore the client example with the help of its output. The client example executes the following steps:</p><ol><li>Set the main account&#x27;s weight to 3</li><li>Set the key management threshold to 3</li><li>Set the deploy threshold to 2</li><li>Add first account new key with weight 1</li><li>Add second account new key with weight 1</li><li>Transfer tokens from the main account using the associated accounts</li><li>Remove the first account</li><li>Remove the second account</li></ol><p>In Step 1, the weight for the main account is set to 3. This ensures the main account has permissions to manage the account thresholds even after the new keys are added.</p><details class="details_Q743 alert alert--info details_h+cY" data-collapsed="true"><summary>Partial sample output for Step 1</summary><div><div class="collapsibleContent_K5uX"><div class="codeBlockContainer_J+bg language-sh theme-code-block"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  mainPurse: &#x27;uref-939bab468f222fc5ae5ff4dbfc2b6c280e311c7a6fb7fcf21370ff6b63bf9d73-007&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  associatedKeys: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accountHash: &#x27;account-hash-1b9352869f5e3d9569e4ad4cc97a2a62e34555958c7f70caac56bbb107af8d7f&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      weight: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  actionThresholds: { deployment: 1, keyManagement: 1 }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div></details><p>In Step 2, the key management threshold for the main account is set to 3. With this threshold, the main account can manage other associated keys and have control over the entire account.</p><details class="details_Q743 alert alert--info details_h+cY" data-collapsed="true"><summary>Partial sample output for Step 2</summary><div><div class="collapsibleContent_K5uX"><div class="codeBlockContainer_J+bg language-sh theme-code-block"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  mainPurse: &#x27;uref-939bab468f222fc5ae5ff4dbfc2b6c280e311c7a6fb7fcf21370ff6b63bf9d73-007&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  associatedKeys: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accountHash: &#x27;account-hash-1b9352869f5e3d9569e4ad4cc97a2a62e34555958c7f70caac56bbb107af8d7f&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      weight: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  actionThresholds: { deployment: 1, keyManagement: 3 }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div></details><p>In Step 3, the deployment threshold is set to 2. This means that the key used to deploy must have a weight of 2 or higher, or else you would have to sign the deploy with multiple keys to meet the deployment threshold.</p><details class="details_Q743 alert alert--info details_h+cY" data-collapsed="true"><summary>Partial sample output for Step 3</summary><div><div class="collapsibleContent_K5uX"><div class="codeBlockContainer_J+bg language-sh theme-code-block"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  mainPurse: &#x27;uref-939bab468f222fc5ae5ff4dbfc2b6c280e311c7a6fb7fcf21370ff6b63bf9d73-007&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  associatedKeys: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accountHash: &#x27;account-hash-1b9352869f5e3d9569e4ad4cc97a2a62e34555958c7f70caac56bbb107af8d7f&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      weight: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  actionThresholds: { deployment: 2, keyManagement: 3 }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div></details><p>In Step 4, a new key with weight 1 is added to the account. You cannot do anything with this key alone since all the action thresholds are higher than 1.</p><details class="details_Q743 alert alert--info details_h+cY" data-collapsed="true"><summary>Partial sample output for Step 4</summary><div><div class="collapsibleContent_K5uX"><div class="codeBlockContainer_J+bg language-sh theme-code-block"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  mainPurse: &#x27;uref-939bab468f222fc5ae5ff4dbfc2b6c280e311c7a6fb7fcf21370ff6b63bf9d73-007&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  associatedKeys: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accountHash: &#x27;account-hash-1b9352869f5e3d9569e4ad4cc97a2a62e34555958c7f70caac56bbb107af8d7f&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      weight: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accountHash: &#x27;account-hash-5795d2d6d858a22ddd6192092a31e2f16c28df53ddbe2c98d1bd632d10065de9&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      weight: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  actionThresholds: { deployment: 2, keyManagement: 3 }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div></details><p>In Step 5, a second key with weight 1 is added. If you use this key with the first key, you can deploy, since the weights add up to 2.</p><details class="details_Q743 alert alert--info details_h+cY" data-collapsed="true"><summary>Partial sample output for Step 5</summary><div><div class="collapsibleContent_K5uX"><div class="codeBlockContainer_J+bg language-sh theme-code-block"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  mainPurse: &#x27;uref-939bab468f222fc5ae5ff4dbfc2b6c280e311c7a6fb7fcf21370ff6b63bf9d73-007&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  associatedKeys: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accountHash: &#x27;account-hash-1b9352869f5e3d9569e4ad4cc97a2a62e34555958c7f70caac56bbb107af8d7f&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      weight: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accountHash: &#x27;account-hash-5795d2d6d858a22ddd6192092a31e2f16c28df53ddbe2c98d1bd632d10065de9&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      weight: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accountHash: &#x27;account-hash-d0bc795436850e7d66e72f7bf3ac2b08ca75270aaaf212849a4ffe7de7f74b21&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      weight: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  actionThresholds: { deployment: 2, keyManagement: 3 }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div></details><p>In Step 6, a deploy is made to transfer tokens from the main account. When the associated accounts sign the transaction, they can transfer funds from the faucet account since their combined weight is 2, which meets the deployment threshold. In the sample output, you can observe that the deploy is signed by both the associated accounts.</p><details class="details_Q743 alert alert--info details_h+cY" data-collapsed="true"><summary>Partial sample output for Step 6</summary><div><div class="collapsibleContent_K5uX"><div class="codeBlockContainer_J+bg language-sh theme-code-block"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">Signed by: account-hash-5795d2d6d858a22ddd6192092a31e2f16c28df53ddbe2c98d1bd632d10065de9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Signed by: account-hash-d0bc795436850e7d66e72f7bf3ac2b08ca75270aaaf212849a4ffe7de7f74b21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Deploy hash: 8d1688ae4e3d40f89ace5402972121710b109f51198501512e0b267bbefe8be9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Deploy result:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hash: &#x27;8d1688ae4e3d40f89ace5402972121710b109f51198501512e0b267bbefe8be9&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    header: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      account: &#x27;0203bd1ddbd9224dd0c8199076e4da8c0ed701b79b6f3bd08af498f05eb3e47cf8a8&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      timestamp: &#x27;2022-01-24T14:43:54.086Z&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ttl: &#x27;30m&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      gas_price: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      body_hash: &#x27;1f2e7efbb3f2f8694582984a608e9ff08a3607b2f484d5992e4c57f2b677b001&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      dependencies: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      chain_name: &#x27;casper-net-1&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    payment: { ModuleBytes: [Object] },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    session: { Transfer: [Object] },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    approvals: [ [Object], [Object] ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div></details><p>After the transfer of funds, the client code removes both deployment accounts in step 7 and 8, and only the main account is left.</p><details class="details_Q743 alert alert--info details_h+cY" data-collapsed="true"><summary>Sample account structure after the client code execution is complete</summary><div><div class="collapsibleContent_K5uX"><div class="codeBlockContainer_J+bg language-sh theme-code-block"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  _accountHash: &#x27;account-hash-1b9352869f5e3d9569e4ad4cc97a2a62e34555958c7f70caac56bbb107af8d7f&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namedKeys: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: &#x27;keys_manager&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      key: &#x27;hash-3ae881f0874bb220179715a66b7ccb588d2a016c632a873646dc6835b8d829b3&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: &#x27;keys_manager_hash&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      key: &#x27;uref-a67f68ff2d176be69723bb9b735ebfb8b76b313863e30fb7387077c632fc977b-007&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mainPurse: &#x27;uref-939bab468f222fc5ae5ff4dbfc2b6c280e311c7a6fb7fcf21370ff6b63bf9d73-007&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  associatedKeys: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accountHash: &#x27;account-hash-1b9352869f5e3d9569e4ad4cc97a2a62e34555958c7f70caac56bbb107af8d7f&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      weight: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  actionThresholds: { deployment: 2, keyManagement: 3 }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div></details><p>You can now employ a similar strategy to set up your account using multiple keys.</p><p>We offer some additional examples of account management in the next section.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/casper-network/documentation/tree/master/docs/casper/dapp-dev-guide/tutorials/multi-sig/client.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/dapp-dev-guide/tutorials/multi-sig/contract"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Contract Example</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/dapp-dev-guide/tutorials/multi-sig/additional"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Additional Scenarios</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#setting-up-a-local-casper-network" class="table-of-contents__link toc-highlight">Setting up a Local Casper Network</a></li><li><a href="#setting-up-the-client" class="table-of-contents__link toc-highlight">Setting up the Client</a></li><li><a href="#testing-the-client" class="table-of-contents__link toc-highlight">Testing the Client</a><ul><li><a href="#exploring-the-client-output" class="table-of-contents__link toc-highlight">Exploring the Client Output</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright"><div class="footer-inner-container">
    <div class="footer-top">
        <ul class="items">
            <li><a href="https://arxiv.org/pdf/2101.02159.pdf" target="_blank" rel="noopener">White Paper</a></li>
            <li>
                <a href="https://casper.network/docs" target="_blank" rel="noopener"> Docs </a>
            </li>
            <li><a href="https://devxdao.com/" target="_blank" rel="noopener">Grant Program</a></li>
            <li><a href="https://casper.network/network/casper-association" target="_blank" rel="noopener">Casper Association</a></li>
        </ul>
    </div>
    <div class="footer-bottom">
        <ul class="items left">
            <li>
                <a href="https://casper.network/en/network" target="_blank" rel="noopener">
                    <img class="footer-logo" src="/docs/icon/logo-white.svg" alt="Casper Logo">
                </a>
            </li>
            <li>Â© 2021 Casper Association</li>
        </ul>
        <ul class="items right">
            <li class="trademark">
                <a href="https://casper.network/network/trademark-policy" target="_blank" rel="noopener">Trademark Policy and Guidelines</a>
            </li>
        </ul>
    </div>
</div>
</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.42631c81.js"></script>
<script src="/docs/assets/js/main.b30bf4af.js"></script>
</body>
</html>